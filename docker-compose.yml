services:
  otterbot:
    build:
      context: .
      args:
        OTTERBOT_UID: ${OTTERBOT_UID:-1000}
        OTTERBOT_GID: ${OTTERBOT_GID:-1000}
    shm_size: "256m"
    ports:
      - "62626:62626"
    volumes:
      - ${OTTERBOT_DATA_DIR:-./docker/otterbot}:/otterbot
    environment:
      - OTTERBOT_DB_KEY=${OTTERBOT_DB_KEY}
      - OTTERBOT_UID=${OTTERBOT_UID:-1000}
      - OTTERBOT_GID=${OTTERBOT_GID:-1000}
      - ENABLE_DESKTOP=${ENABLE_DESKTOP:-true}
      - DESKTOP_RESOLUTION=${DESKTOP_RESOLUTION:-1280x720x24}
      - SUDO_MODE=${SUDO_MODE:-restricted}
    restart: unless-stopped

  searxng:
    image: searxng/searxng:latest
    profiles: [search]
    ports:
      - "8080:8080"
    volumes:
      - ${OTTERBOT_DATA_DIR:-./docker/otterbot}/searxng:/etc/searxng
    restart: unless-stopped
