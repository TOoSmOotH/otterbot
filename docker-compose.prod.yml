# Production docker-compose for Otterbot
# This is a reference template â€” the install script generates its own copy.
# Usage: docker compose -f docker-compose.prod.yml up -d
#
# Requires a .env file with at minimum:
#   OTTERBOT_DB_KEY=<random-hex-string>
services:
  otterbot:
    image: ghcr.io/toosmooth/otterbot:latest
    shm_size: "256m"
    ports:
      - "${PORT:-62626}:62626"
    volumes:
      - ${OTTERBOT_DATA_DIR:-./data}:/otterbot
    environment:
      - OTTERBOT_DB_KEY=${OTTERBOT_DB_KEY}
      - OTTERBOT_UID=${OTTERBOT_UID:-1000}
      - OTTERBOT_GID=${OTTERBOT_GID:-1000}
      - ENABLE_DESKTOP=${ENABLE_DESKTOP:-true}
      - DESKTOP_RESOLUTION=${DESKTOP_RESOLUTION:-1280x720x24}
      - SUDO_MODE=${SUDO_MODE:-restricted}
      - OTTERBOT_ALLOWED_ORIGIN=${OTTERBOT_ALLOWED_ORIGIN:-}
    restart: unless-stopped
